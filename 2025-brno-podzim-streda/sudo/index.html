<h1 id="ukoly_sprava_uzivatelu_sudo">Ãškoly â€“ SprÃ¡va uÅ¾ivatelÅ¯, Sudo
<a href="#ukoly_sprava_uzivatelu_sudo" class="header-link">#</a>
</h1>
<h2 id="_teoreticka_cast">ğŸ§  TeoretickÃ¡ ÄÃ¡st
<a href="#_teoreticka_cast" class="header-link">#</a>
</h2>
<h3 id="a_prace_se_soubory_a_vystupem">A. PrÃ¡ce se soubory a vÃ½stupem
<a href="#a_prace_se_soubory_a_vystupem" class="header-link">#</a>
</h3>
<ol>
<li>Co udÄ›lÃ¡ pÅ™Ã­kaz <code>cat</code> a kdy je vhodnÃ© ho pouÅ¾Ã­t?</li>
<li>JakÃ½ je rozdÃ­l mezi <code>less</code> a <code>cat</code>?</li>
<li>K Äemu slouÅ¾Ã­ pÅ™Ã­kaz <code>head</code> a jak urÄÃ­Å¡, kolik Å™Ã¡dkÅ¯ zobrazÃ­?</li>
<li>Jak bys zjistil, kolik mÃ¡ soubor Å™Ã¡dkÅ¯ nebo slov?</li>
<li>JakÃ½ pÅ™Ã­kaz bys pouÅ¾il, pokud chceÅ¡ zobrazit pouze poslednÃ­ch 10 Å™Ã¡dkÅ¯ souboru?</li>
</ol>
<h3 id="b_uzivatele_skupiny_a_prava">B. UÅ¾ivatelÃ©, skupiny a prÃ¡va
<a href="#b_uzivatele_skupiny_a_prava" class="header-link">#</a>
</h3>
<ol>
<li>JakÃ½ je rozdÃ­l mezi uÅ¾ivatelem a skupinou v Linuxu?</li>
<li>Co znamenajÃ­ jednotlivÃ© ÄÃ¡sti vÃ½pisu oprÃ¡vnÄ›nÃ­ u souboru (napÅ™. <code>-rw-r--r--</code>)?</li>
<li>JakÃ½ je rozdÃ­l mezi vlastnÃ­kem souboru a skupinou souboru?</li>
<li>Co obsahujÃ­ soubory <code>/etc/passwd</code> a <code>/etc/shadow</code>?</li>
<li>K Äemu slouÅ¾Ã­ pÅ™Ã­kaz <code>chmod</code> a jak se pouÅ¾Ã­vÃ¡?</li>
<li>K Äemu slouÅ¾Ã­ pÅ™Ã­kazy <code>useradd</code>, <code>groupadd</code>, <code>usermod</code>, <code>passwd</code>, <code>userdel</code> a <code>groupdel</code>?</li>
</ol>
<h2 id="_prakticka_cast">ğŸ’» PraktickÃ¡ ÄÃ¡st
<a href="#_prakticka_cast" class="header-link">#</a>
</h2>
<h3 id="ukol_1_vytvoreni_skupin_a_uzivatelu">Ãškol 1: VytvoÅ™enÃ­ skupin a uÅ¾ivatelÅ¯
<a href="#ukol_1_vytvoreni_skupin_a_uzivatelu" class="header-link">#</a>
</h3>
<ol>
<li>VytvoÅ™ skupiny:<ul>
<li><code>studenti</code></li>
<li><code>ucitele</code></li>
</ul>
</li>
<li>VytvoÅ™ uÅ¾ivatele:<ul>
<li><code>eva</code> (Älen skupiny <code>studenti</code>)</li>
<li><code>adam</code> (Älen skupiny <code>studenti</code>)</li>
<li><code>petr</code> (Älen skupiny <code>ucitele</code>)</li>
</ul>
</li>
<li>Nastav kaÅ¾dÃ©mu uÅ¾ivateli heslo (napÅ™. <code>test123</code>).</li>
<li>OvÄ›Å™, do jakÃ½ch skupin uÅ¾ivatelÃ© patÅ™Ã­.</li>
<li>PÅ™idej uÅ¾ivatele <code>eva</code> takÃ© do skupiny <code>ucitele</code>.</li>
<li>SmaÅ¾ uÅ¾ivatele <code>adam</code> a skupinu <code>ucitele</code>.</li>
</ol>
<h3 id="ukol_2_prava_a_pristup_k_souborum">Ãškol 2: PrÃ¡va a pÅ™Ã­stup k souborÅ¯m
<a href="#ukol_2_prava_a_pristup_k_souborum" class="header-link">#</a>
</h3>
<ol>
<li>PÅ™epni se na uÅ¾ivatele <code>petr</code>.</li>
<li>V jeho domovskÃ© sloÅ¾ce vytvoÅ™ soubor <code>poznamka.txt</code>.</li>
<li>Zobraz vÃ½pis oprÃ¡vnÄ›nÃ­.</li>
<li>Nastav oprÃ¡vnÄ›nÃ­ tak, aby:<ul>
<li>vlastnÃ­k mohl ÄÃ­st i zapisovat,</li>
<li>skupina mohla pouze ÄÃ­st,</li>
<li>ostatnÃ­ nemÄ›li Å¾Ã¡dnÃ½ pÅ™Ã­stup.</li>
</ul>
</li>
<li>OvÄ›Å™, Å¾e zmÄ›na probÄ›hla sprÃ¡vnÄ›.</li>
<li>ZmÄ›Åˆ vlastnÃ­ka souboru na uÅ¾ivatele <code>eva</code> a skupinu na <code>studenti</code>.</li>
<li>OvÄ›Å™, Å¾e soubor mÃ¡ novÃ©ho vlastnÃ­ka i skupinu.</li>
</ol>
<h3 id="ukol_3_sdilena_slozka_pro_skupinu">Ãškol 3: SdÃ­lenÃ¡ sloÅ¾ka pro skupinu
<a href="#ukol_3_sdilena_slozka_pro_skupinu" class="header-link">#</a>
</h3>
<ol>
<li>Jako <code>root</code> vytvoÅ™ sloÅ¾ku <code>/home/spolecne</code>.</li>
<li>Nastav vlastnÃ­ka <code>root</code> a skupinu <code>studenti</code>.</li>
<li>Nastav prÃ¡va tak, aby:<ul>
<li>vlastnÃ­k mÄ›l prÃ¡va <code>rw</code>,</li>
<li>skupina mÄ›la prÃ¡va <code>rw</code>,</li>
<li>ostatnÃ­ nemÄ›li Å¾Ã¡dnÃ¡.</li>
</ul>
</li>
<li>Nastav <strong>setgid bit</strong>, aby novÄ› vytvoÅ™enÃ© soubory ve sloÅ¾ce zdÄ›dily skupinu <code>studenti</code>:<div class="highlight"><pre><span></span>chmod<span class="w"> </span>g+s<span class="w"> </span>/home/spolecne
</pre></div></li>
<li>Ve sloÅ¾ce <code>/home/spolecne</code> vytvoÅ™ soubor <code>zkouska.txt</code> jako uÅ¾ivatel <code>eva</code>.</li>
<li>OvÄ›Å™, Å¾e soubor mÃ¡ skupinu <code>studenti</code>.</li>
<li>PÅ™epni se na uÅ¾ivatele <code>adam</code> a zkontroluj, Å¾e mÅ¯Å¾e tento soubor ÄÃ­st i upravovat.</li>
</ol>
<h3 id="ukol_4_struktura_skolni_tym">Ãškol 4: Struktura â€Å kolnÃ­ tÃ½mâ€œ
<a href="#ukol_4_struktura_skolni_tym" class="header-link">#</a>
</h3>
<ol>
<li><p>Znovu vytvoÅ™ skupinu <code>ucitele</code>.</p>
</li>
<li><p>VytvoÅ™ uÅ¾ivatele:</p>
<ul>
<li><code>reditel</code></li>
<li><code>ucitelka</code></li>
<li><code>student1</code></li>
<li><code>student2</code></li>
</ul>
</li>
<li><p>PÅ™iÅ™aÄ uÅ¾ivatele do skupin:</p>
<ul>
<li><code>reditel</code>, <code>ucitelka</code> â†’ <code>ucitele</code></li>
<li><code>student1</code>, <code>student2</code> â†’ <code>studenti</code></li>
</ul>
</li>
<li><p>VytvoÅ™ strukturu sloÅ¾ek:</p>
<div class="highlight"><pre><span></span><span class="go">/opt/skola/</span>
<span class="go">  â”œâ”€â”€ ucitele/</span>
<span class="go">  â””â”€â”€ studenti/</span>
</pre></div></li>
<li><p>Nastav:</p>
<ul>
<li><code>/opt/skola/ucitele</code> â†’ vlastnÃ­k <code>root</code>, skupina <code>ucitele</code>, prÃ¡va <code>770</code></li>
<li><code>/opt/skola/studenti</code> â†’ vlastnÃ­k <code>root</code>, skupina <code>studenti</code>, prÃ¡va <code>770</code></li>
</ul>
</li>
<li><p>Do obou sloÅ¾ek pÅ™idej soubor <code>info.txt</code> s krÃ¡tkÃ½m textem <em>(napÅ™. â€VÃ­tejte ve sloÅ¾ce uÄitelÅ¯â€œ)</em>.</p>
</li>
<li><p>OvÄ›Å™, Å¾e:</p>
<ul>
<li>UÄitelÃ© majÃ­ pÅ™Ã­stup pouze do sloÅ¾ky <code>ucitele</code>.</li>
<li>Studenti pouze do <code>studenti</code>.</li>
<li>OstatnÃ­ uÅ¾ivatelÃ© nemajÃ­ pÅ™Ã­stup do Å¾Ã¡dnÃ© z nich.</li>
</ul>
</li>
</ol>
<h2 id="bonus_sudo_zapomina">Bonus: Sudo zapomÃ­nÃ¡
<a href="#bonus_sudo_zapomina" class="header-link">#</a>
</h2>
<p><em>(<code>sudo</code> ti dÃ¡vÃ¡ oprÃ¡vnÄ›nÃ­, ale i zodpovÄ›dnost. NauÄ se pÅ™ed kaÅ¾dÃ½m pouÅ¾itÃ­m <code>sudo</code> pÅ™eÄÃ­st spouÅ¡tÄ›nÃ½ pÅ™Ã­kaz a zamyslet se, jestli ho opravdu chceÅ¡ spustit. Ale opÄ›t, neboj se experimentovat â€“ na virtuÃ¡lnÃ­m poÄÃ­taÄi nenÃ­ co zkazit.)</em></p>
<p>Co by mÄ›l dÄ›lat tento pÅ™Ã­kaz?</p>
<div class="highlight"><pre><span></span><span class="go">ll /var/db/sudo/lectured/</span>
</pre></div><p>PÅ™Ã­kaz ale pod bÄ›Å¾nÃ½m uÅ¾ivatelskÃ½m ÃºÄtem nefunguje; potÅ™ebujeÅ¡ <code>sudo ll /var/db/sudo/lectured/</code>. To ale taky nefunguje. ProÄ? Jak to spravit?</p>
<ul>
<li>JakÃ© soubory jsou v <code>/var/db/sudo/lectured/</code>? Komu patÅ™Ã­? Jak jsou velkÃ©?</li>
<li>JakÃ© soubory jsou v <code>/var/run/sudo/ts</code>? Komu patÅ™Ã­? Jak jsou velkÃ©? Kdo k nim mÃ¡ jakÃ¡ prÃ¡va?</li>
<li>Jak by vypadal pÅ™Ã­kaz, kterÃ½ smaÅ¾e â€tvÅ¯jâ€œ soubor v <code>/var/run/sudo/ts</code>?</li>
</ul>
<p>KdyÅ¾ spustÃ­Å¡ pÅ™Ã­kaz <code>sudo</code>, zeptÃ¡ se tÄ› na heslo. KdyÅ¾ ho spustÃ­Å¡ podruhÃ© (ve stejnÃ©m terminÃ¡lu), uÅ¾ se neptÃ¡ â€“ pamatuje si, Å¾e jsi heslo pÅ™ed chvilkou zadala.</p>
<p>VyzkouÅ¡ej si ale, Å¾e tohle nefunguje s pÅ™Ã­kazem pro smazÃ¡nÃ­ â€tvÃ©hoâ€œ souboru v <code>/var/run/sudo/ts</code>. KdyÅ¾ ho pustÃ­Å¡ nÄ›kolikrÃ¡t za sebou, <code>sudo</code> se vÅ¾dycky znovu zeptÃ¡ na heslo.</p>
<ul>
<li><p>ProÄ?</p>
</li>
<li><p>Zadej tyhle pÅ™Ã­kazy:</p>
<ul>
<li>SmaÅ¾ â€svÅ¯jâ€œ soubor z <code>/var/db/sudo/lectured/</code>.</li>
<li>SmaÅ¾ â€svÅ¯jâ€œ soubor z <code>/var/run/sudo/ts</code>.</li>
<li>SpusÅ¥ <code>sudo echo</code>.</li>
</ul>
<p>A odpovÄ›z:</p>
<ul>
<li>Co je u <code>sudo echo</code> jinak?</li>
<li>K Äemu slouÅ¾Ã­ soubory ve <code>/var/db/sudo/lectured/</code>?</li>
</ul>
</li>
</ul>