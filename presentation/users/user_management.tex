\documentclass{beamer}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\setbeamerfont{title}{size=\LARGE}

\title{Správa uživatelů}
\author{Eliška Jégrová}
\date{05. 10. 2025}

% pro obrázky a kreslení
\usepackage{tikz}
\usetikzlibrary{positioning}
\usepackage{graphicx}
\usepackage{datetime}
\usepackage{svg}
\usepackage{listings}


% vlastní příkaz pro tildy
\newcommand{\ts}{\raisebox{-0.25em}{\textasciitilde}}


\begin{document}
	
	\frame{\titlepage}
	
	\begin{frame}{Obsah}
		\tableofcontents
	\end{frame}
	
	
\section{Výpis obsahu souborů}

\begin{frame}{Zobrazení obsahu souborů}
	\begin{itemize}
		\item \texttt{cat <soubor>} – vypíše celý obsah souboru
		\item \texttt{head <soubor>} – vypíše prvních 10 řádků
		\item \texttt{head -n <počet>} – vypíše zadaný počet řádků od začátku
		\item \texttt{tail <soubor>} – vypíše posledních 10 řádků
		\item \texttt{tail -n <počet>} – vypíše zadaný počet řádků od konce
	\end{itemize}
\end{frame}

\begin{frame}{Prohlížení delších souborů}
	\begin{itemize}
		\item \texttt{more <soubor>} – zobrazí obsah po stránkách
		\begin{itemize}
			\item posun o stránku dál: mezerník
			\item ukončení: klávesa \texttt{q}
		\end{itemize}
		\item \texttt{less <soubor>} – pokročilejší prohlížeč textu
		\begin{itemize}
			\item pohyb pomocí šipek nebo \texttt{PageUp/PageDown}
			\item ukončení: klávesa \texttt{q}
		\end{itemize}
	\end{itemize}
\end{frame}

\begin{frame}{Počítání řádků, slov a znaků}
	\begin{itemize}
		\item \texttt{wc <soubor>} – vypíše počet řádků, slov a znaků
		\item \texttt{wc -l <soubor>} – počet řádků
		\item \texttt{wc -w <soubor>} – počet slov
		\item \texttt{wc -c <soubor>} – počet znaků
	\end{itemize}
\end{frame}

\begin{frame}{Samostatná práce – výpis obsahu souborů}
	\small
	\begin{enumerate}
		\item Přejdi do adresáře \texttt{data-shell/pdb}.
		\item Vypiš obsah souboru \texttt{lanoxin.pdb} pomocí \texttt{cat}.
		\item Zobraz prvních 10 řádků pomocí \texttt{head}.
		\item Zobraz posledních 10 řádků pomocí \texttt{tail}.
		\item Prohlédni soubor pohodlně pomocí \texttt{more} nebo \texttt{less}.
		\item Spočítej počet řádků souboru pomocí \texttt{wc -l}.
	\end{enumerate}
\end{frame}

\section{Správa uživatelů}

\begin{frame}[fragile]{Zjištění aktuálního uživatele}
	\begin{itemize}
		\item \texttt{whoami} – vypíše jméno aktuálního uživatele
	\end{itemize}
	\begin{semiverbatim}
		$ whoami
		hanka
	\end{semiverbatim}
	
	\begin{itemize}
		\item \texttt{groups} – vypíše skupiny aktuálního uživatele
	\end{itemize}
	\begin{semiverbatim}
		$ groups
		hanka wheel
	\end{semiverbatim}
	
	\begin{itemize}
		\item \texttt{id} – zobrazí UID, GID a skupiny uživatele
	\end{itemize}
	\begin{semiverbatim}
		$ id
		uid=1000(hanka) gid=1000(hanka) 
		skupiny=1000(hanka), 10(wheel) 
		kontext=
		unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
	\end{semiverbatim}
\end{frame}

\section{Práva souborů a adresářů}
\begin{frame}[fragile]{Práce se soubory a práva}
	\begin{itemize}
		\item \texttt{ls -l} – zobrazí podrobnosti o souborech a adresářích
		\begin{semiverbatim}
			-rw-r--r--. 1 hanka hanka    32 Aug  8  2019 pizza.cfg
			drwxr-xr-x. 8 hanka hanka 4096  6. říj 23.40 data
		\end{semiverbatim}
		\item \texttt{chmod} – změní práva souboru
	\end{itemize}
	
	\textbf{Přehled práv:}
	\begin{itemize}
		\item \texttt{r} – read, právo číst obsah souboru
		\item \texttt{w} – write, právo zapisovat do souboru
		\item \texttt{x} – execute, právo spouštět soubor nebo procházet adresář
	\end{itemize}
\end{frame}

\begin{frame}{Rozdělení práv u souborů a adresářů}
	\begin{itemize}
		\item V \texttt{ls -l} se zobrazují práva jako např. \texttt{-rwxr-xr-x}
		\item První znak označuje typ souboru:
		\begin{itemize}
			\item \texttt{-} = běžný soubor
			\item \texttt{d} = adresář
		\end{itemize}
		\item Následují 3 bloky po třech znacích:
		\begin{itemize}
			\item 1. blok – práva vlastníka (user)  \texttt{rwx}
			\item 2. blok – práva skupiny (group)  \texttt{r-x}
			\item 3. blok – práva ostatních (others)  \texttt{r-x}
		\end{itemize}
		\item Každý blok obsahuje \texttt{r} (read), \texttt{w} (write), \texttt{x} (execute)
	\end{itemize}
	
	\textbf{Příklad:} \texttt{-rwxr-xr-x}  \\
	- Vlastník může číst, zapisovat a spouštět   \\
	- Skupina a Ostatní můžou číst a spouštět  
\end{frame}


\begin{frame}[fragile]{Příklad změny práv souboru a adresáře}
	\begin{itemize}
		\item \texttt{chmod -r pizza.cfg} – odebere právo čtení
		\item \texttt{chmod -w pizza.cfg} – odebere právo zápisu
		\item \texttt{chmod -x pizza.cfg} – odebere právo spouštění
		\item \texttt{chmod +rwx pizza.cfg} – přidá všechna práva (čtení, zápis, spouštění)
		\item \texttt{chmod g+x .} – přidá spouštění (execute) pro skupinu u aktuálního adresáře
		\item \texttt{chmod u=rw,g=r,o= pizza.cfg} – nastaví práva čtení a zápisu pro vlastníka, čtení pro skupinu, žádná pro ostatní
		
	\end{itemize}
	
\end{frame}


\begin{frame}{Samostatná práce – změna práv souborů a adresářů}
	\small
	
	Po každé změně se vždy pokus zjistit, zda se změny projevily:
	\begin{itemize}
		\item např. \texttt{cat file.txt} po odebrání práva čtení

	\end{itemize}
	
	\begin{enumerate}
		\item Vytvoř si testovací soubor a adresář:
		\begin{itemize}
			\item \texttt{touch file.txt}
			\item \texttt{mkdir testdir}
		\end{itemize}
		\item Zkontroluj aktuální práva: \texttt{ls -l}
		\item Odeber právo čtení souboru: \texttt{chmod -r file.txt}
		\item Přidej právo čtení zpět a odeber zápisu: \\ \texttt{chmod +r file.txt; chmod -w file.txt}
		\item Odeber právo spouštění adresáře: \texttt{chmod -x testdir}
		\item Nastav konkrétní práva souboru: \texttt{chmod u=rw,g=r,o= file.txt}
		\item Přidej spouštění pro uživatele u adresáře: \texttt{chmod u+x testdir}
	\end{enumerate}

\end{frame}

\section{Zvýšená oprávnění a sudo}
\begin{frame}{Zvýšená oprávnění, sudo a uživatel \texttt{root}}
	\begin{itemize}
		\item Většina uživatelů má běžná (omezená) oprávnění.
		\item Některé příkazy měnící systém (např. správa uživatelů, instalace programů) vyžadují vyšší práva
	\end{itemize}
	
	\begin{block}{\texttt{Uživatel root}}
		\begin{itemize}
			\item má neomezená oprávnění – může měnit cokoliv v systému.
			\item se používá jen pro správu systému, ne pro běžnou práci.
		\end{itemize}
	\end{block}
	\begin{block}{Příkaz \texttt{sudo}}
		\begin{itemize}
			\item Slouží ke spuštění příkazu s oprávněními uživatele \texttt{root}.
			\item Používá se před příkazem: \texttt{sudo <příkaz>}.
			\item Požaduje zadání uživatelského hesla pro ověření.
		\end{itemize}
	\end{block}

\end{frame}

\begin{frame}{Samostatná práce – zvýšená oprávnění}
	\small
	\begin{enumerate}
		\item Zkus spustit příkaz \texttt{cat /etc/shadow}.  
		Co se stane bez \texttt{sudo}?
		\item Zjisti, kdo je aktuálně přihlášen: \texttt{whoami}.
		\item Pomocí \texttt{sudo whoami} ověř, že se spouští jako \texttt{root}.
		\item Zopakuj příkaz se \texttt{sudo}: \texttt{sudo cat /etc/shadow}.
	\end{enumerate}
\end{frame}

\section{Uživatelé a skupiny}
\begin{frame}{Uživatelé a skupiny}
	\begin{itemize}
		\item \texttt{sudo useradd <uživatel>} – vytvoří nového uživatele
		\item \texttt{sudo passwd <uživatel>} – nastaví heslo
		\item \texttt{sudo groupadd <skupina>} – vytvoří novou skupinu
		\item \texttt{sudo usermod -aG <skupina> <uživatel>} – přidá uživatele do skupiny
		\item \texttt{sudo userdel <uživatel>} – smaže uživatele
		\item \texttt{sudo groupdel <skupina>} – smaže skupinu
	\end{itemize}
	
	\begin{semiverbatim}
		\$ sudo adduser alena
		
		\$ sudo groupadd spravci
		
		\$ sudo usermod -aG spravci alena
	\end{semiverbatim}
\end{frame}


\begin{frame}{Samostatná práce – uživatelé a skupiny}
	\small
	\begin{enumerate}
		\item Vytvoř nového uživatele \texttt{alena}.
		\item Nastav mu heslo.
		\item Vytvoř skupinu \texttt{spravci}.
		\item Přidej uživatele \texttt{alena} do skupiny \texttt{spravci}.
		\item Ověř přidání pomocí příkazu \texttt{groups alena}.
		\item Následně smaž uživatele alena a skupinu spravci.
	\end{enumerate}
\end{frame}

\section{Přepnutí uživatele a informace o účtech}
\begin{frame}[fragile]{Přepnutí uživatele a informace o uživatelích}
	\begin{itemize}
		\item \texttt{su <uživatel>} – přepne na jiného uživatele  
		\item Ukončení přihlášení: \texttt{exit}
	\end{itemize}
	
	\vspace{1.5em}
	\textbf{Systémové soubory s informacemi o uživatelích:}
	\begin{itemize}
		\item \texttt{/etc/passwd} – základní informace o uživateli  
		\item \texttt{/etc/shadow} – hesla a jejich hashované podoby (jen root má přístup)
	\end{itemize}
	
	\vspace{1.5em}
	\textbf{Příklad:}
	\begin{semiverbatim}
		$ su alena
		Heslo:
		$ whoami
		alena
	\end{semiverbatim}
\end{frame}

\begin{frame}{Samostatná práce – přepnutí uživatele}
	\small
	\begin{enumerate}
		\item Přepni se na uživatele \texttt{alena} pomocí \texttt{su alena}.
		\item Ověř přihlášení příkazem \texttt{whoami}.
		\item Zobraz první tři řádky souboru \texttt{/etc/passwd}.
		\item Zkus se podívat do \texttt{/etc/shadow} a sleduj výsledek.
		\item Vrať se zpět pomocí \texttt{exit}.
	\end{enumerate}
\end{frame}

\section{Změna vlastníka a skupiny souborů}

\begin{frame}[fragile]{Změna vlastníka/skupiny souboru}
	\begin{itemize}
		\item \texttt{chown <uživatel> <soubor>} – změní vlastníka souboru
		\item \texttt{chown <uživatel>:<skupina> <soubor>} – změní vlastníka i skupinu
		\item \texttt{chgrp <skupina> <soubor>} – změní pouze skupinu souboru
	\end{itemize}
	
		\vspace{1.5em}
	\textbf{Příklad:}
	\begin{semiverbatim}
		$ chown hanka pizza.cfg
		$ chown hanka:wheel pizza.cfg
		$ chgrp wheel pizza.cfg
	\end{semiverbatim}
\end{frame}

\begin{frame}{Samostatná práce – změna vlastníka a skupiny}
	\small
	\begin{enumerate}
		\item Vytvoř testovací soubor \texttt{soubor.txt}.
		\item Zjisti jeho aktuálního vlastníka: \texttt{ls -l soubor.txt}.
		\item Pomocí \texttt{sudo chown alena soubor.txt} změň vlastníka.
		\item Pomocí \texttt{sudo chgrp spravci soubor.txt} změň skupinu.
		\item Ověř změnu znovu pomocí \texttt{ls -l}.
		\item Pomocí \texttt{sudo chown <uživatel>:<skupina> soubor.txt} změň vše na původního vlastníka i skupinu.
	\end{enumerate}
\end{frame}

\end{document}